/*
 * app_water_control.h
 *
 *  Created on: Aug 8, 2025
 *      Author: Admin
 */

#ifndef _APP_WATER_CONTROL_H_
#define _APP_WATER_CONTROL_H_

#include <stdint.h>

//#define APP_WATER_CONTROL_GUARD_TIMEOUT		(30 * 60 * 1000) //nếu bơm chạy quá 30 phút, báo lỗi
#define APP_WATER_CONTROL_GUARD_TIMEOUT		(  3 * 1000) //lấy giá trị thấp để mô phỏng

#define APP_WATER_BLINK_PERIOD				(  500) //chu kỳ chớp led


typedef enum {
    S_PUMP_CHECK = 0,
	S_PUMP_OFF ,      // Đang tắt bơm
    S_PUMP_ON,         // Đang bơm
	S_SENSOR_ERROR,
    NUM_PUMP_STATES   // Tổng số trạng thái
} app_water_state_t;

typedef enum {
    S_ERROR_LED_OFF = 0,
	S_ERROR_BLINK_ON ,
	S_ERROR_BLINK_OFF ,

    NUM_ERROR_LED_STATES   // Tổng số trạng thái
} app_water_error_led_state_t;


void app_water_control_init(void);
void app_water_control_fsm_update(void);
void app_water_control_update(void);


#endif /* APP_APP_WATER_CONTROL_H_ */
